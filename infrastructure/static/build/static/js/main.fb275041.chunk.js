(this["webpackJsonplogin-app-reactjs"]=this["webpackJsonplogin-app-reactjs"]||[]).push([[0],{27:function(e,t,a){e.exports=a(58)},32:function(e,t,a){},58:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(24),o=a.n(l),c=(a(32),a(9)),s=a(7),u=a(1),i=a(11),m=a.n(i),p=function(){return sessionStorage.getItem("token")||null},E=function(){sessionStorage.removeItem("token"),sessionStorage.removeItem("user")},v=function(e,t){sessionStorage.setItem("token",e),sessionStorage.setItem("user",JSON.stringify(t))};var b=function(e){var t=Object(n.useState)(e),a=Object(c.a)(t,2),r=a[0],l=a[1];return{value:r,onChange:function(e){l(e.target.value)}}},d=function(e){var t=Object(n.useState)(!1),a=Object(c.a)(t,2),l=a[0],o=a[1],s=b(""),u=b(""),i=Object(n.useState)(null),p=Object(c.a)(i,2),E=p[0],d=p[1];return r.a.createElement("div",null,"Login",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",null,"Username",r.a.createElement("br",null),r.a.createElement("input",Object.assign({type:"text"},s,{autoComplete:"new-password"}))),r.a.createElement("div",{style:{marginTop:10}},"Password",r.a.createElement("br",null),r.a.createElement("input",Object.assign({type:"password"},u,{autoComplete:"new-password"}))),E&&r.a.createElement(r.a.Fragment,null,r.a.createElement("small",{style:{color:"red"}},E),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement("input",{type:"button",value:l?"Loading...":"Login",onClick:function(){d(null),o(!0),m.a.post("/api/user/login/",{email:s.value,password:u.value}).then((function(t){o(!1),v(t.data.token,s.value),e.history.push("/dashboard")})).catch((function(e){o(!1),401===e.response.status?d(e.response.data.message):d("Something went wrong. Please try again later.")}))},disabled:l}),r.a.createElement("br",null))};var g=function(e){var t=function(){var e=sessionStorage.getItem("user");return e?JSON.parse(e):null}();return r.a.createElement("div",null,"Welcome ",t.name,"!",r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("input",{type:"button",onClick:function(){E(),e.history.push("/login")},value:"Logout"}))};var h=function(){return r.a.createElement("div",null,"Welcome to the Home Page!")},f=a(12),j=["component"];var O=function(e){var t=e.component,a=Object(f.a)(e,j);return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return p()?r.a.createElement(t,e):r.a.createElement(u.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},k=["component"];var y=function(e){var t=e.component,a=Object(f.a)(e,k);return r.a.createElement(u.b,Object.assign({},a,{render:function(e){return p()?r.a.createElement(u.a,{to:{pathname:"/dashboard"}}):r.a.createElement(t,e)}}))};var w=function(){var e=Object(n.useState)(!0),t=Object(c.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){var e=p();e&&m.a.get("http://localhost:4000/verifyToken?token=".concat(e)).then((function(e){v(e.data.token,e.data.user),l(!1)})).catch((function(e){E(),l(!1)}))}),[]),a&&p()?r.a.createElement("div",{className:"content"},"Checking Authentication..."):r.a.createElement("div",{className:"App"},r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement(s.b,{exact:!0,activeClassName:"active",to:"/"},"Home"),r.a.createElement(s.b,{activeClassName:"active",to:"/login"},"Login"),r.a.createElement("small",null,"(Access without token only)"),r.a.createElement(s.b,{activeClassName:"active",to:"/dashboard"},"Dashboard"),r.a.createElement("small",null,"(Access with token only)")),r.a.createElement("div",{className:"content"},r.a.createElement(u.d,null,r.a.createElement(u.b,{exact:!0,path:"/",component:h}),r.a.createElement(y,{path:"/login",component:d}),r.a.createElement(O,{path:"/dashboard",component:g}))))))};o.a.render(r.a.createElement(w,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.fb275041.chunk.js.map